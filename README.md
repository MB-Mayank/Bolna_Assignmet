## 🎥 Demo Video

[![Watch the demo](data:image/png;base64,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)](https://drive.google.com/file/d/1i7AAAwupukZEYoXZ2MqoN7ft6jP31iNV/view?usp=sharing)

# 📞 Bolna-Google Sheets Integration

A robust **Flask-based integration** that automates voice calls using **Bolna AI** and tracks call data in **real-time** through Google Sheets.  
This system provides **intelligent call management** with retry logic, real-time updates, and comprehensive call tracking.

---

## 📋 Prerequisites

- A Flask server set up to receive webhook events  
- An account with [Ngrok](https://ngrok.com)

---

## ⚡ Steps

### 1. Install Ngrok
Download and install Ngrok from [here](https://ngrok.com/download).

### 2. Start Your Flask Server
Run your Flask integration locally:


python app.py


By default, Flask runs on:
`http://127.0.0.1:5000`

### 3. Expose Flask with Ngrok

In a new terminal, start an Ngrok tunnel:

```bash
ngrok http 5000
```

Ngrok will provide a public URL, such as:

```
Forwarding https://a1b2c3d4.ngrok.io -> http://localhost:5000
```

### 4. Configure Webhook in Bolna Dashboard

* Go to the **Bolna Dashboard**
* Navigate to **Your Agent → Webhooks**
* Add the Ngrok URL with your webhook endpoint, for example:

```
https://a1b2c3d4.ngrok.io/webhook/bolna
```

### 5. Test the Webhook

* Trigger a call using the Bolna sheet or API
* Bolna will send webhook updates to your Flask server via Ngrok
* Check your Flask console to confirm that webhook events are being logged

⚠️ **Important:** Ngrok URLs change each time you restart the tunnel unless you use a paid plan with reserved domains.
👉 Update the webhook URL in the Bolna Dashboard whenever the Ngrok URL changes.

---

## 🚀 Features

### Core Functionality

* **Automated Voice Calls**: Initiates calls through Bolna AI API to phone numbers listed in Google Sheets
* **Real-time Tracking**: Updates call status, duration, and results instantly via webhooks
* **Smart Retry Logic**: Intelligently retries failed calls while avoiding duplicates
* **Background Processing**: Continuous monitoring and processing of pending calls
* **Thread-Safe Operations**: Prevents duplicate calls and ensures data consistency

### Call Management

* **Status Tracking**: Monitors call progression from initiation to completion
* **Duplicate Prevention**: Active call tracking prevents multiple calls to the same number
* **Comprehensive Logging**: Detailed logs for debugging and monitoring
* **Error Handling**: Robust error handling with automatic recovery

### Data Integration

* **Google Sheets Integration**: Direct read/write access to spreadsheet data
* **Real-time Updates**: Instant status updates via webhook callbacks
* **Transcript Storage**: Saves call transcripts and summaries to the sheet
* **Call Analytics**: Tracks call duration, outcomes, and detailed notes

---

## 🏗️ System Architecture

### Components

* **Flask Web Server** → Handles webhook callbacks and provides API endpoints
* **Background Worker** → Continuously processes pending calls and cleanup tasks
* **Google Sheets Client** → Manages spreadsheet operations and data synchronization
* **Bolna API Client** → Handles voice call initiation and management

### Data Flow

```
Google Sheets → Background Worker → Bolna API → Voice Call → Webhook → Google Sheets
```

---

## 📋 Prerequisites

### Required Services

* **Bolna AI Account** → For voice call capabilities
* **Google Cloud Project** → For Sheets API access
* **Google Sheets** → Pre-configured spreadsheet with proper columns

### Python Dependencies

```
flask
gspread
oauth2client
requests
threading
logging
```

---

## ⚙️ Configuration

### Environment Variables

```python
CREDENTIALS_FILE = "eminent-crane-434217-a2-8bc0bb699e19.json"  # Google Service Account
SHEET_URL       = "https://docs.google.com/spreadsheets/d/..."  # Target Google Sheet
API_TOKEN       = "bn-f9c"                                      # Bolna API Token
AGENT_ID        = "5c73"                                        # Bolna Agent ID
```

### Google Sheets Structure

Required columns:

| Column | Field               | Description                    |
| ------ | ------------------- | ------------------------------ |
| A      | Name                | Customer name                  |
| B      | Phone Number        | Format: +1234567890            |
| C      | Status              | Call status                    |
| D      | Latest Execution ID | Bolna execution ID             |
| E      | Duration            | Call duration in seconds       |
| F      | Last Attempt Time   | Timestamp                      |
| G      | Notes               | Error messages, hangup reasons |
| H      | Transcript          | Call transcript                |
| I      | Summary             | Call summary                   |

---

## 🔄 How It Works

### 1. Call Initiation Process

* Background worker scans Google Sheets every **2 minutes**
* Identifies pending calls based on status and timing rules
* Normalizes phone numbers for consistency
* Initiates calls through Bolna API with customer data
* Updates sheet with **"initiating" → "initiated"** status

### 2. Smart Retry Logic

**Retry Conditions:**

* New/Empty Status → Immediate processing
* Failed Calls → Retry after **10+ minutes**
* No Answer/Busy → Retry after **10+ minutes**
* Active Calls → No retry if recent (<5 minutes)
* Completed Calls → ❌ Never retry

### 3. Real-time Updates via Webhooks

* Bolna sends webhook notifications for call events
* System processes status changes, duration, transcripts
* Google Sheets updated immediately with new data
* Active call tracking prevents duplicates

### 4. Status Management

**Call Statuses:**

```
pending/new       → Ready for calling
initiating        → Call being set up
initiated         → Call in progress
ringing           → Phone ringing
answered          → Call connected
completed         → Call finished successfully
failed/busy/no-answer → Retry eligible
call-disconnected → Call ended
```

### 5. Background Maintenance

* Cleans up stale active calls (>15 minutes)
* Processes **one call per cycle** to avoid overwhelming
* Rate limiting between calls (**5-second intervals**)
* Comprehensive error logging and recovery

---

## 📊 Webhook Data Processing

### Incoming Webhook Format

```json
{
  "id": "execution_id",
  "status": "completed",
  "context_details": {
    "recipient_phone_number": "+1234567890"
  },
  "telephony_data": {
    "duration": "45.2",
    "hangup_reason": "caller_hangup"
  },
  "transcript": "Call transcript...",
  "summary": "Call summary...",
  "smart_status": "successful_call"
}
```

---

```

Would you like me to also create a **GitHub badges section** (Python version, Flask, Google Sheets API, Ngrok) at the top for extra polish?
```
